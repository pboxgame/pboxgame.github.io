---
layout: default
---
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>предметы мебели</title>
    <link rel="stylesheet" href="style.css">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="expires" content="0">
    <style>
        p {
            margin: 1.5rem 0;
        }
        #types * {
            font-family: 'Inter';
            background-color: #000000;
            color: white;
        }
        #types .row-header-wrapper, .column-headers-background {
            display: none;
        }
        #types .s0 {
            font-weight: 700;
        }
        .unvisible {
            display: none;
        }
        b {
            font-weight: 700;
        }
    </style>
</head>

<body>
    <main>
        <h1 class="pink">предметы мебели</h1>
        <div class="ver_nav">
            <div><a href="furns0.14.html">v0.14</a> </div>
            <div class="select"><h4 style="margin:0;">v 0.16</h4></div>
            <div><a href="furns.html">v0.17</a> </div>
        </div>
        <p>
            Важно помнить, что сам по себе предмет мебели не несет никаких функций, он всего лишь спрайт с коллизией. Можно создать <a href="ediths.html">действие</a> с участием этого предмета и тогда он будет использоваться.
        </p>
        <h2 class="darkblue" style="margin-top: 4rem;">contr.optFurns и contr.furns_all</h2>
        <p>Отныне есть два типа массивов с мебелью: <i>contr.optFurns и contr.furns_all</i>.</p>
        <p>contr.optFurns глобальнее, чем contr.furns_all, и соответственно, менее поворотлив, поэтому плохо
            терпит любые изменения на лету. Обращаться к нему нужно по возможности как можно реже и стоит его
            использовать в основном в случае сохранения и загрузки игры.</p>
        <p>contr.furns_all держит всю информацию о предметах, которые физически представлены в данный
            момент на игровых чанках. <br><br></p>
            <table>
                <tr>
                    <td class="params" style="padding: 40px;">
                        <h3 class="disclaimer">когда нужен contr.optFurns</h3>
                        <ul>
                            <li>когда мы обращаемся к инвентарным предметам, т.к. они находятся всегда бесконечно далеко от
                                чанка, в котором идет игра
                            </li>
                            <li>когда нам вдруг нужно какой-то предмет, который точно за пределами игрового чанка</li>
                        </ul>
                    </td>
                    <td class="params" style="padding: 40px;">
                        <h3 class="disclaimer">когда нужен contr.furns_all</h3>
                        <ul>
                            <li>при определении целей для людей</li>
                            <li>при изменении/перезаписи вида, типа и других параметров мебели</li>
                            <li>при удалении предмета мебели</li>
                            <li>предметы, созданные в инвентарь и не прошедшие перезагрузку чанка, также хранятся в contr.furns_all до перезагрузки чанка/сохранения</li>
                            <li>прочие рядовые операции с предметом в ходе действий людей тоже осуществляются через contr.furns_all</li>
                        </ul>
                    </td>
                </tr>
            </table>
        
        <h2 class="darkblue" style="margin-top: 4rem;">как происходит загрузка и сохранение</h2>

        <table>
            <tr>
                <td class="params" style="padding: 40px;">
                    <h3 class="disclaimer">загрузка</h3>
                    Когда мы производим загрузку игрового сохранения, информация о <b>всех предметах в мире</b> из JSON записывается в contr.optFurns, затем идет сверка того, какие предметы по координатам попадают в границы игровых чанков и эти предметы дублируются в виде физических предметов в contr.furns_all. Все локальные изменения за время игры на чанке записываются только в contr.furns_all.</td>
            
                <td class="params"  style="padding: 40px;">
                    <h3 class="disclaimer">сохранение</h3>
                    Когда мы производим сохранение игры или перезаход на другой чанк, информация о видимых предметах с прошлых чанков берется из contr.furns_all, предметы оттуда с соответствующими globalID перезаписываются внутри contr.optFurns (т.е. мы записываем более актуальную версию предметов, которые были на игровых чанках) и весь contr.optFurns записывается в сохранение JSON.</td>
            </tr>
        </table>
        <h2 class="darkblue" style="margin-top: 4rem;">виды мебели</h2>        
        <p>
            В игре есть следующие спрайты (под каждым указание типа и вида). 
                Также можно создать <a href="address_system.html">табличку с "адресом"</a>, т.е. номером дома.
          
        </p>
        <p>
            <img src="images/furn_tiles7.png" alt="">
        </p>
        
    </main>
    <script src="https://code.jquery.com/jquery-3.7.0.min.js" integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>
        <script>
            $("#types_all").click(function(){
                $("#types").toggleClass("unvisible");
            });
        </script>
</body>

</html>